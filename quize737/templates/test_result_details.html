<!-- Детали конкретного отчёта -->

{% extends "main_base.html" %}

{% block content %}

<div class="result_list">
    <fieldset>
            <legend>Результаты теста</legend>
        <div class="block-list">
            {% for i in result %}
            <div class="block_light_up">
                <div class="list-other_field">
                    <span>Дата:</span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.timestamp|date:"d.m.Y H:i:s"}}</span>
                </div>
            </div>
            <div class="block_light_up">
                <div class="list-other_field">
                    <span>ФИО:</span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.user_name}}</span>
                </div>
            </div>

            <div class="block_light_up">
                <div class="list-other_field">
                    <span>Должность:</span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.user_id.profile.get_position_display}}</span>
                </div>
            </div>

            <div class="block_light_up">
                <div class="list-other_field">
                    <span>Название теста:</span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.quize_name}}</span>
                </div>
            </div>

            <div class="block_light_up">
                <div class="list-other_field">
                    <span>Количество вопросов:</span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.total_num_q}}</span>
                </div>
            </div>

            <div class="block_light_up">
                <div class="list-other_field">
                    <span>Количество правильных ответов: </span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.correct_q_num}}</span>
                </div>
            </div>

<!--            <div class="block_none_light_up">-->
<!--                Количество баллов: <span class="mark_up">{{i.score_number}}</span>-->
<!--            </div>-->

            <div class="block_light_up">
                <div class="list-other_field">
                Минимально-необходимое количество баллов:
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.pass_score}}%</span>
                </div>
            </div>

            <div class="block_light_up">
                <div class="list-other_field">
                    <span>Общий результат: </span>
                </div>
                <div class="list-other_field">
                    <span class="mark_up">{{i.total_result}}%</span>
                </div>
            </div>

            <br>

                {% if i.conclusion %}
                <div class="list-other_field">
                    <span class="positive">ТЕСТ СДАН</span>
                </div>
                {% else %}
                <div class="list-other_field">
                    <span class="negative">ТЕСТ НЕ СДАН</span>

                {% endif %}
            </div>
            {% endfor %}

            <input type="submit" id="hide_show_butt" value="Показать ответы" onclick="show_answers()">
            <div id="answers" style="display:none">

                    {% for question in answers%}
                        <div>Вопрос:</div>
                        <div>{{question.question.question}}</div>
                        <div>Ответы:</div>
                            {% if '1' in question.question%}
                        <div>{{question.question.option_1}}</div>

                        <div>{{question.question.option_2}}</div>
                        {% if question.question.option_3 %}
                            <div>{{question.question.option_3}}</div>
                        {% endif %}
                        {% if question.question.option_4 %}
                            <div>{{question.question.option_4}}</div>
                        {% endif %}
                        {% if question.question.option_5 %}
                            <div>{{question.question.option_5}}</div>
                        {% endif %}
                        {% if question.question.option_6 %}
                            <div>{{question.question.option_6}}</div>
                        {% endif %}
                        {% if question.question.option_7 %}
                            <div>{{question.question.option_7}}</div>
                        {% endif %}
                        {% if question.question.option_8 %}
                            <div>{{question.question.option_8}}</div>
                        {% endif %}
                        {% if question.question.option_9 %}
                            <div>{{question.question.option_9}}</div>
                        {% endif %}
                        {% if question.question.option_10 %}
                            <div>{{question.question.option_10}}</div>
                        {% endif %}
                    {% endfor %}

            </div>

            <form id="go_back" method='get' action='{% url "quize737:tests_results_list" %}'>
            </form>
            <form id="download_test" action="{% url 'quize737:download_test_result' id %}">
            </form>

            <div class="list-other_field">
                <input type="submit" value="Вернуться" form="go_back">
                <span style="color: black;"> | </span>
                <input type="submit" value="Скачать" form="download_test">
            </div>
        </div>
    </fieldset>
</div>

<script>
    let ans_block = document.getElementById("answers");
    let button = document.getElementById("hide_show_butt");
    function show_answers(event) {
        if (ans_block.style.display === 'none' ) {
                ans_block.style.display = 'block';
                button.setAttribute('value', 'Скрыть ответы');
            } else {
                ans_block.style.display = 'none';
                button.setAttribute('value', 'Показать ответы')
                }
    };

</script>

{% endblock %}