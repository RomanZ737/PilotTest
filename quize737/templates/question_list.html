<!-- Список вопросов по всем темам -->

{% extends "main_base.html" %}
{% load tags %}
{% block content %}

<fieldset>
    <legend>
            <a href="{% url 'quize737:question_list' %}">СПИСОК ВОПРОСОВ</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:new_question' %}">Добавить вопрос</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:theme_editor' %}">Список Тем</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:new_theme' %}">Добавить Тему</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:file_upload' %}">Загрузить файл</a>

            {% if request.user|has_group:'krs' or user.is_superuser %}
                <span style="color: black;"> | </span>
                <a href="{% url 'quize737:download_questions_bay' %}">Скачать базу</a>
            {% endif %}

            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:question_form_file_download' %}">Скачать Форму Вопросов</a>
    </legend>

    <div class="block-list">
        <div class="block_none_light_up">
            <div class="search-form">
                <form id="question_search" action="{% url 'quize737:question_list' %}" method="get">
                    <input type="text" name="question_search" placeholder="Поиск вопроса..." value="{{user_search_input}}">
                    <input type="submit" value="Искать">
                </form>
            </div>
            <div class="filter-form">
                <div class="filter_related_questions">
                    <form id="theme_filter" action="{% url 'quize737:question_list' %}" method="get">
                    <select class="theme_filter" name="filter">
                        {% for option in them_list %}
                            {% if filter_input %}
                                {% if option.name == filter_input.0 %}
                                    <option value="{{option.name}}" selected>{{option.name}}</option>
                                {% else %}
                                    <option value="{{option.name}}">{{option.name}}</option>
                                {% endif %}
                            {% else %}
                                {% if option.name == "Все темы" %}
                                    <option value="{{option.name}}" selected>{{option.name}}</option>
                                {% else %}
                                    <option value="{{option.name}}">{{option.name}}</option>
                                {% endif %}
                            {% endif %}
                    {% endfor %}
                </select>
                    <select class="ac_type_filter" name="filter">
                        {% for ac in ac_type %}
                            {% if filter_input %}
                                {% if ac == filter_input.1 %}
                                    <option value="{{ac}}" selected>{{ac}}</option>
                                {% else %}
                                    <option value="{{ac}}">{{ac}}</option>
                                {% endif %}
                            {% else %}
                                {% if ac == "Все" %}
                                    <option value="{{ac}}" selected>{{ac}}</option>
                                {% else %}
                                    <option value="{{ac}}">{{ac}}</option>
                                {% endif %}
                            {% endif %}
                    {% endfor %}
                </select>
                </form>
                </div>
                <div style="display: inline-block;">
                        <form id="reset_filter" action="{% url 'quize737:question_list' %}" method="get">
                    </form>
                    </div>
                <div class="button_block">
                        <input class="submit_filter" type="submit" value="Фильтр" form="theme_filter">
                        <span style="color: black">|</span>
                        <input class="submit_filter" type="submit" value="Сбросить Фильтр" form="reset_filter">
                    </div>
                <div class="list-q_count">
                    {% if filter_input %}
                        {% for theme in them_list %}
                            {% if theme.name == filter_input.0 %}
                                <span class="mark_up">{{theme.name}}: {{q_count}}</span>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <span class="mark_up">Все темы: {{q_count}}</span>
                    {% endif %}
                </div>
            </div>

        </div>

        {% if no_search_results %}
        <div>
            <span style="color: rgb(209, 209,209);">{{results}}</span>
        </div>
        {% else %}
            {% for i in questions %}
            <div class="block_light_up">
                <div class="list-them">
                    <a href="{% url 'quize737:theme_editor' i.them_name.id %}"><span class="theme_color">{{i.them_name}}</span></a>
                </div>

                <div class="list-question">
                    <a href="{% url 'quize737:question_list_details' i.id %}">{{i.question}}</a>
                </div>

                <div class="list-delete">
                    <a href="{% url 'quize737:question_del' i.id %}" onclick="return confirm('Удалить вопрос?') || event.preventDefault()">Удалить</a>
                </div>
            </div>
            {% empty %}
                <div class="list-question">
                <span style="color: rgb(209, 209,209);">Вопросы отсутсвуют</span>
                </div>

            {% endfor %}
            <br>
            {% include "paginator_2.html" with page=questions %}

        {% endif %}
    </div>
</fieldset>

{% endblock %}