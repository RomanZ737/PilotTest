<!-- Список вопросов по всем темам -->

{% extends "main_base.html" %}
{% load tags %}
{% block content %}

<fieldset>
    <legend>
            <a href="{% url 'quize737:question_list' %}">СПИСОК ВОПРОСОВ</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:new_question' %}">Добавить вопрос</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:theme_editor' %}">Список Тем</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:new_theme' %}">Добавить Тему</a>
            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:file_upload' %}">Загрузить файл</a>

            {% if request.user|has_group:'krs' or user.is_superuser %}
                <span style="color: black;"> | </span>
                <a href="pass">Скачать базу</a>
            {% endif %}

            <span style="color: black;"> | </span>
            <a href="{% url 'quize737:question_form_file_download' %}">Скачать Форму Вопросов</a>
    </legend>

    <div class="block-list">

        <div class="search-form">
            <form id="question_search" action="{% url 'quize737:question_list' %}" method="get">
            <input type="text" name="question_search" placeholder="Поиск вопроса...">
            <input type="submit" value="Искать">
            </form>
        </div>

        <div class="filter-form">
            <div style="display: inline-block; width: 40%;">
            <form id="theme_filter" action="{% url 'quize737:question_list' %}" method="get">
                <select class="theme_filter" name="theme_filter">
                    {% for option in them_list %}
                            {% if filter_input %}
                                {% if option.id == filter_input %}
                                    <option value="{{option.id}}" selected>{{option.name}}</option>
                                {% else %}
                                    <option value="{{option.id}}">{{option.name}}</option>
                                {% endif %}
                            {% else %}
                                {% if option.id == 5 %}
                                    <option value="{{option.id}}" selected>{{option.name}}</option>
                                {% else %}
                                    <option value="{{option.id}}">{{option.name}}</option>
                                {% endif %}
                            {% endif %}
                    {% endfor %}
                </select>
                <input type="submit" value="Фильтр">
            </form>
                </div>
            <div class="list-q_count">
            <span class="mark_up">Всего: {{q_count}}</span>
        </div>
        </div>



        {% if no_search_results %}
        <div>
            <span style="color: rgb(209, 209,209);">{{results}}</span>
        </div>
        {% else %}
            {% for i in questions %}
            <div class="block_light_up">
                <div class="list-them">
                    <a href="{% url 'quize737:theme_editor' i.them_name.id %}"><span class="theme_color">{{i.them_name}}</span></a>
                </div>
                    <span style="color: black;"> | </span>
                <div class="list-question">
                    <a href="{% url 'quize737:question_list_details' i.id %}">{{i.question}}</a>
                </div>
                    <span style="color: black;"> | </span>
                <div class="list-delete">
                    <a href="{% url 'quize737:question_del' i.id %}" onclick="return confirm('Удалить вопрос?') || event.preventDefault()">Удалить</a>
                </div>
            </div>
            {% empty %}
                <div class="list-question">
                <span style="color: rgb(209, 209,209);">Вопросы отсутсвуют</span>
                </div>

            {% endfor %}
            <br>
            {% include "paginator_2.html" with page=questions %}

        {% endif %}
    </div>
</fieldset>



<!--<div class="right_side">-->
<!--        <fieldset>-->
<!--            <legend>Редактировать</legend>-->

<!--            <p><a href="{% url 'quize737:new_question' %}">Добавить вопрос</a></p>-->
<!--            <p><a href="{% url 'quize737:theme_editor' %}">Редактировать Темы</a></p>-->
<!--            <p><a href="{% url 'quize737:file_upload' %}">Загрузить файл</a></p>-->
<!--            <p><a href="pass">Скачать базу</a></p>-->

<!--        </fieldset>-->
<!--</div>-->
{% endblock %}